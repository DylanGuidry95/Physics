<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | Physics</title>
    <link rel="stylesheet" href="TemplateData/style.css">
    <link rel="shortcut icon" href="TemplateData/favicon.ico" />
    <script src="TemplateData/UnityProgress.js"></script>
  	    <style>
        #body
        {
            background-color:gray;
        }
        #header 
        {
            border: 2px solid black;
            margin-bottom:5px;
            background-color:gray;
            color:black;
            text-align:center;
            padding:10px;
        }
		#Section
		{
		    border: 2px solid black;
			margin-left:150px;
			margin-right:150px;
			margin-bottom: 5px;
			background-color:gray;
			color:black;
			text-align:center;
            padding:10px;
		}
		#BreakDown
		{
			margin-left:150px;
			margin-bottom: 5px;
			margin-right:150px;
			background-color:white;
			color:black;
			text-align:left;
            padding:10px;
		}
		#Game
		{
			margin-bottom: 5px;
			background-color:white;
            padding:350px;
		}
    </style>
  </head>
  <div id = "header">
  <h1><font size = "20px"><b><u>Cloth Simulation</u></b></font></h1>
  </div>
  <div id = "Game">
  <body class="template">
    <p class="header"><span>Unity WebGL Player | </span>Physics</p>
    <div class="template-wrap clear">
    <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()" height="600px" width="960px"></canvas>
      <div class="logo"></div>
      <div class="fullscreen"><img src="TemplateData/fullscreen.png" width="38" height="38" alt="Fullscreen" title="Fullscreen" onclick="SetFullscreen(1);" /></div>
      <div class="title">Physics</div>
    </div>
    <p class="footer">&laquo; created with <a href="http://unity3d.com/" title="Go to unity3d.com">Unity</a> &raquo;</p>
    <script type='text/javascript'>
  // connect to canvas
  var Module = {
    TOTAL_MEMORY: 268435456,
    filePackagePrefixURL: "Release/",
    memoryInitializerPrefixURL: "Release/",
    preRun: [],
    postRun: [],
    print: (function() {
      return function(text) {
        console.log (text);
      };
    })(),
    printErr: function(text) {
      console.error (text);
    },
    canvas: document.getElementById('canvas'),
    progress: null,
    setStatus: function(text) {
      if (this.progress == null) 
      {
        if (typeof UnityProgress != 'function')
          return;
        this.progress = new UnityProgress (canvas);
      }
      if (!Module.setStatus.last) Module.setStatus.last = { time: Date.now(), text: '' };
      if (text === Module.setStatus.text) return;
      this.progress.SetMessage (text);
      var m = text.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);
      if (m)
        this.progress.SetProgress (parseInt(m[2])/parseInt(m[4]));
      if (text === "") 
        this.progress.Clear()
    },
    totalDependencies: 0,
    monitorRunDependencies: function(left) {
      this.totalDependencies = Math.max(this.totalDependencies, left);
      Module.setStatus(left ? 'Preparing... (' + (this.totalDependencies-left) + '/' + this.totalDependencies + ')' : 'All downloads complete.');
    }
  };
  Module.setStatus('Downloading (0.0/1)');
</script>
<script src="Release/UnityConfig.js"></script>
<script src="Release/fileloader.js"></script>
<script>if (!(!Math.fround)) {
  var script = document.createElement('script');
  script.src = "Release/Builds.js";
  document.body.appendChild(script);
} else {
  var codeXHR = new XMLHttpRequest();
  codeXHR.open('GET', 'Release/Builds.js', true);
  codeXHR.onload = function() {
    var code = codeXHR.responseText;
    if (!Math.fround) { 
try {
  console.log('optimizing out Math.fround calls');
  var m = /var ([^=]+)=global\.Math\.fround;/.exec(code);
  var minified = m[1];
  if (!minified) throw 'fail';
  var startAsm = code.indexOf('// EMSCRIPTEN_START_FUNCS');
  var endAsm = code.indexOf('// EMSCRIPTEN_END_FUNCS');
  var asm = code.substring(startAsm, endAsm);
  do {
    var moar = false; // we need to re-do, as x(x( will not be fixed
    asm = asm.replace(new RegExp('[^a-zA-Z0-9\\$\\_]' + minified + '\\(', 'g'), function(s) { moar = true; return s[0] + '(' });
  } while (moar);
  code = code.substring(0, startAsm) + asm + code.substring(endAsm);
  code = code.replace("'use asm'", "'almost asm'");
} catch(e) { console.log('failed to optimize out Math.fround calls ' + e) }
 }

    var blob = new Blob([code], { type: 'text/javascript' });
    codeXHR = null;
    var src = URL.createObjectURL(blob);
    var script = document.createElement('script');
    script.src = URL.createObjectURL(blob);
    script.onload = function() {
      URL.revokeObjectURL(script.src);
    };
    document.body.appendChild(script);
  };
  codeXHR.send(null);
}
</script>
  </div>
  <div id = "Section">
  <h2><font size = "6px"><b>I: Requirements Documentation</b></font></h2>
  </div>
  <div id = "BreakDown">
	<p>
	<font size = "4px"> <b>1.1: Description of the Problem</b> </font> <br>
	<pre><font size = "4px">
Name: Cloth Simulation 
Problem Statement: Implement and calculate the various forces that take place in a cloth simulation. 
	</font></pre>
	<font size = "4px"> <b>1.2: Input Information</b> </font> <br>
	<pre><font size = "4px">
Controls: Mouse and Keyboard 
	W - Enables/Disables Wind Controls GUI Elements 
	S - Enables/Disables Spring Controls GUI Elements 
	G - Enables/Disables Gravity Controls GUI Elements 
	P - Enables/Disables Pause Menu GUI Elements 
	R - Resets Camera 
	Right Mouse Button - Grabs Cloth 
	Left Mouse Button - Move Camera 
	Scroll Wheel - Rotate Camera 
	</font></pre>
	<font size = "4px"> <b>1.3: Output Information</b> </font> <br>
	<pre><font size = "4px">
The program will display a simulation of what cloth should behave like in the real world we live in.
	</font></pre>
	<font size = "4px"> <b>1.4: User Interface</b> </font> <br>
		<pre><font size = "4px">
Wind Controls Panel
	Wind Direction Sliders - Determines the direction the force of the wind will be applied in.
	Wind Speed Slider - Determines how hard the wind will be blowing.
Spring Controls Panel
	Spring Stiffness Slider - Adjusts the stiffness of the springs of the cloth. 
Gravity Controls Panel
	Gravity Modifier - Modifies the strength of gravity in the system.
Pause Menu
	Quit - Closes the application(Only if using .exe).
	Reload - Reloads the level.
Cloth Controls Panel
	Cloth Size Slider - Modifies the size the colth will be.
	Gen Cloth Button - Generates the cloth with the new size set by the slider.
	</font></pre>
  </div>
  <div id = "Section">
    <h2><font size = "6px"><b>II: Design Documentation</b></font></h2>
  </div>
  <div id = "BreakDown">
	<p>
		<font size = "4px"> <b>2.1: System Architecture Description</b> </font> <br>
		<pre><font size = "4px">
The program is divided up into 5 classes (SpringDamper.cs, ClothBehavior.cs, AeroDynamics,
GUI.cs and Node.cs).The ClothBehavior class is responsible for handling all calculations for both
the springs and the nodes in the simulation. The GUI handles all of the on screen sliders and HUD
element the user can interact with the adjust the behavior of the cloth.
		</font></pre>
		<font size = "4px"> <b>File: Node.cs</b> </font> <br>
		<pre><font size = "4px">
	Name: m_Mass(float)
	Description: Hold the value that represents the mass of a node.
	
	Name: m_Velocity(Vector3)
	Description: Holds the value that represents the current velocity the node is moving at.

	Name: m_Acceleration(Vector3)
	Description: Holds the value that represents the current acceleration of the node.

	Name: m_Force(Vector3)
	Description: Hold the values that represents the strength of the force acting on the node.

	Name: locked(bool)
	Description: Boolean value to show if the node is locked at its starting position.
		</font></pre>
		<font size = "4px"> <b>File: AeroDynamics.cs</b> </font> <br>
		<pre><font size = "4px">
	Name: p1 (Node)
	Description: Reference to the first node the triangle is connected to.

	Name: p2 (Node)
	Description: Reference to the second node the spring is connected to.

	Name: p3 (Node)
	Description: Reference to the third node the spring is connected to.
	
	Name: CreateTriangle(void)
	Arguments: Node, Node, Node	
	Description: Takes the nodes passed in through the arguments and assigns them to the Node variables declared in the class. 

	Name: DrawTriangle(void)
	Arguments: N/A
	Description: Draws lines that connect the three points of the triangle together.
	</font></pre>		
	<font size = "4px"> <b>File: SpringDamper.cs</b> </font> <br>
	<pre><font size = "4px">
	Name: l(float)
	Description: Holds the value used to represent the rest length of the spring.

	Name: p1 (Node)
	Description: Reference to the first node the spring is connected to. 

	Name: p2 (Node)
	Description: Reference to the second node the spring is connected to. 

	Name: MakeSpring(void)
	Arguments: Node, Node, float
	Description: Creates a spring based on the arguments based in when the spring is being created in the Spawn Springs function in Cloth Behavior class

	Name: DrawLines(void)
	Arguments: N/A
	Description: Draws the lines between nodes the spring is connected to
	</font></pre>
	<font size = "4px"> <b>File: GUI.cs</b> </font> <br>
	<pre><font size = "4px">
	Name: Cloth (ClothBehavior)
	Description: Stores a reference to the cloth so we can adjust the coefficients of the various forces acting on the cloth.

	Name: WindControls(GameObject)
	Description: GameObject that is the parent for all the GUI elements that modify the wind forces.

	Name: VerticalWind(Slider)
	Description: Adjust the wind blowing from north and south.

	Name: HorizontalWind(Slider)
	Description: Adjusts the wind blowing from east and west.

	Name: WindSpeed(Slider)
	Description: Adjusts how strong the wind is blowing in the direction the user specifies with the Vertical and Horizontal wind sliders.

	Name: WindMph(Text)
	Description: Displays how fast the wind is blowing.

	Name: SpringControls(GameObject)
	Description: GameObject that is the parents for all GUI elements that modify the spring forces.

	Name: Stiffness(Slider)
	Description: Adjusts how stiff the springs of the cloth are.

	Name: GravityControls(GameObject)
	Description: GameObject that is the parent for all GUI elements that modify the force of gravity in the simulation.

	Name: Help(GameObject)
	Description: GameObject that is the parent for all GUI elements that provide controls and manage application flow.

	Name: windDirty(bool)
	Description: boolean value that is used to turn the wind GUI elements off.
		
	Name: springDirty(bool)
	Description: boolean value that is used to turn the spring GUI elements off.
	
	Name:gravDirty(bool)
	Description: boolean value that is used to turn the grvity GUI elements off.
		
	Name: helpDirty(bool)
	Description: boolean value that is used to turn the help GUI elements off.

	Name: OnGUI(void)
	Arguments: N/A
	Description: Calls in the following functions Wind(), Spring(), and Gravity().

	Name: Start(void)
	Arguments: N/A
	Description: Turns off all GUI displays and the mouse cursor.

	Name: Update(void)
	Arguments: N/A
	Description: Calls in the DisplaysOn function and checks to see if the mouse cursor should be displayed whether or not other GUI elements are turned on.

	Name: Wind(void)
	Arguments: N/A
	Description: Updates the wind coefficients in the ClothBehavior script based on the values of the all the sliders on the Wind Controls panel.

	Name: Spring(void)
	Arguments: N/A
	Description: Updates the spring coefficients in the ClothBehavior script based on the values of the all the sliders on the Spring Controls panel.
	
	Name: Gravity(void)
	Arguments: N/A
	Description: Updates the gravity coefficients in the ClothBehavior script based on the values of the all the sliders on the Gravity Controls panel.

	Name: Close(void)
	Arguments: N/A
	Description: Closes the application when the exit button is clicked (Only works when ran through exe not on the internet.)

	Name: Reload()
	Arguments: N/A
	Description: Reloads the scene with a fresh cloth for the user to interact with.

	Name:DisplaysOn(void)
	Arguments: N/A
	Description: Turns the displays on or off when the key that is assigned to them is pressed.
	</font></pre>
	<font size = "4px"> <b>File: ClothBehavior.cs</b> </font> <br>
	<pre><font size = "4px">
	Name: NodePrefab(Node)
	Description: Holds a reference to the node prefab.

	Name: NODES (List<Nodes>)
	Description: List of all the nodes in the simulation.

	Name: SpringsPrefab(SpringDamper)
	Description: Holds a reference to the spring prefab

	Name: SPRINGS(List<SpringDamper>)
	Description: List of all the springs in the simulation
	Name: AeroPrefab(AeroDynamics)
	Description: Used to reference the prefab associated with the AeroDynamics class

	Name: TRIANGLES(List<AeroDynamics>)
	Description: List of all the triangles in the simulation.

	Name: Height(int)
	Description: Holds the value the represents the height of the cloth.

	Name: Width(int)
	Description: Holds the value the represents the width of the cloth.

	Name: gCoefficient(float)
	Description: Coefficient used to modify the pull of gravity.

	Name: Gravity(Vector3)
	Description: Holds the values used to represent the pull of gravity.

	Name: k(float)
	Description: Coefficient used to adjust the stiffness of the springs in the simulation.


	Name: b(float)
	Description: Coefficient used to adjust the damping factor of the springs in the simulation

	Name: net(bool)
	Description: Check to set the way the nodes spawn in the system, in this case in the shape of a net.

	Name:drape(bool)
	Description: Check to set the way the nodes spawn in the system, in this case in the shape of a drape.


	Name: Start(void)
	Arguments: N/A
	Description: Calls in the SpawnNodes and SpawnSprings functions when the program starts.

	Name: SpawnSpring(void)
	Arguments: N/A
	Description: Spawns all springs in the simulation and links them to nodes that follow a set of case checks.

	Name: SpawnNodes(void)
	Arguments: N/A
	Description: Spawns all the Nodes in the simulation based on the width and height of the cloth
	Name: SpawnTriangles()
	Arguments: N/A
	Description: Spawns in all the triangles in the simulation

	Name: EulerIntergration(void)
	Arguments: Node
	Description: Integrates motion for each node in the simulation. These vectors are only calculated if the node is not locked in place

	Name: CalcSpringForce(void)
	Arguments: SpringDamper
	Description: Calculates the Spring Force of each spring in the simulation

	Name: FixedUpdate(void) 
	Arguments: N/A
	Description: Follows the steps of cloth simulation and repeats them every loop to achieve the look of cloth in a simulation.

	Name: TearCloth(void)
	Arguments: SpringDamper
	Description: Destroys a spring if the two nodes it is connected to spread to far apart from each other.

	Name: CursorMovement(void)
	Arguments: N/A
	Description: Moves the cursor around the screen and allows the user to grab the cloth and pull it around and tear pieces of it off.

	Name: CalcDis(float)
	Arguments: Vector3, Vector3
	Description: Calculates the distance between two vector3 values passed in as arguments

	</font></pre>
	</P>
  </div>
  </body>
</html>
