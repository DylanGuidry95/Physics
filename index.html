<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | Physics</title>
    <link rel="stylesheet" href="TemplateData/style.css">
    <link rel="shortcut icon" href="TemplateData/favicon.ico" />
    <script src="TemplateData/UnityProgress.js"></script>
	    <style>
        #body
        {
            background-color:gray;
        }
        #header 
        {
            border: 2px solid black;
            margin-bottom:5px;
            background-color:gray;
            color:black;
            text-align:center;
            padding:10px;
        }
		#Section
		{
			margin-bottom: 5px;
			background-color:gray;
			color:black;
			text-align:center;
            padding:10px;
		}
		#BreakDown
		{
			margin-left:150px;
			margin-bottom: 5px;
			margin-right:150px;
			background-color:gray;
			color:black;
			text-align:left;
            padding:10px;
		}
		#Game
		{
			margin-bottom: 5px;
			background-color:white;
            padding:350px;
		}
    </style>
  </head>
  <div id = "header">
  <h1><font size = "20px"><b><u>Cloth Simulation</u></b></font></h1>
  </div>
  <div id = "Game">
  <body class="template">
	<h1> 
    <p class="header"><span>Unity WebGL Player | </span>Physics</p>
    <div class="template-wrap clear">
    <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()" height="600px" width="960px"></canvas>
      <div class="logo"></div>
      <div class="fullscreen"><img src="TemplateData/fullscreen.png" width="38" height="38" alt="Fullscreen" title="Fullscreen" onclick="SetFullscreen(1);" /></div>
      <div class="title">Physics</div>
    </div>
    <p class="footer">&laquo; created with <a href="http://unity3d.com/" title="Go to unity3d.com">Unity</a> &raquo;</p>
    <script type='text/javascript'>
  // connect to canvas
  var Module = {
    TOTAL_MEMORY: 268435456,
    filePackagePrefixURL: "Release/",
    memoryInitializerPrefixURL: "Release/",
    preRun: [],
    postRun: [],
    print: (function() {
      return function(text) {
        console.log (text);
      };
    })(),
    printErr: function(text) {
      console.error (text);
    },
    canvas: document.getElementById('canvas'),
    progress: null,
    setStatus: function(text) {
      if (this.progress == null) 
      {
        if (typeof UnityProgress != 'function')
          return;
        this.progress = new UnityProgress (canvas);
      }
      if (!Module.setStatus.last) Module.setStatus.last = { time: Date.now(), text: '' };
      if (text === Module.setStatus.text) return;
      this.progress.SetMessage (text);
      var m = text.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);
      if (m)
        this.progress.SetProgress (parseInt(m[2])/parseInt(m[4]));
      if (text === "") 
        this.progress.Clear()
    },
    totalDependencies: 0,
    monitorRunDependencies: function(left) {
      this.totalDependencies = Math.max(this.totalDependencies, left);
      Module.setStatus(left ? 'Preparing... (' + (this.totalDependencies-left) + '/' + this.totalDependencies + ')' : 'All downloads complete.');
    }
  };
  Module.setStatus('Downloading (0.0/1)');
</script>
<script src="Release/UnityConfig.js"></script>
<script src="Release/fileloader.js"></script>
<script>if (!(!Math.fround)) {
  var script = document.createElement('script');
  script.src = "Release/Builds.js";
  document.body.appendChild(script);
} else {
  var codeXHR = new XMLHttpRequest();
  codeXHR.open('GET', 'Release/Builds.js', true);
  codeXHR.onload = function() {
    var code = codeXHR.responseText;
    if (!Math.fround) { 
try {
  console.log('optimizing out Math.fround calls');
  var m = /var ([^=]+)=global\.Math\.fround;/.exec(code);
  var minified = m[1];
  if (!minified) throw 'fail';
  var startAsm = code.indexOf('// EMSCRIPTEN_START_FUNCS');
  var endAsm = code.indexOf('// EMSCRIPTEN_END_FUNCS');
  var asm = code.substring(startAsm, endAsm);
  do {
    var moar = false; // we need to re-do, as x(x( will not be fixed
    asm = asm.replace(new RegExp('[^a-zA-Z0-9\\$\\_]' + minified + '\\(', 'g'), function(s) { moar = true; return s[0] + '(' });
  } while (moar);
  code = code.substring(0, startAsm) + asm + code.substring(endAsm);
  code = code.replace("'use asm'", "'almost asm'");
} catch(e) { console.log('failed to optimize out Math.fround calls ' + e) }
 }

    var blob = new Blob([code], { type: 'text/javascript' });
    codeXHR = null;
    var src = URL.createObjectURL(blob);
    var script = document.createElement('script');
    script.src = URL.createObjectURL(blob);
    script.onload = function() {
      URL.revokeObjectURL(script.src);
    };
    document.body.appendChild(script);
  };
  codeXHR.send(null);
}
</script>
  </div>
  <div id = "Section">
  <h2><font size = "6px"><b>I: Requirements Documentation</b></font></h2>
  </div>
  <div id = "BreakDown">
	<p>
	<font size = "4px"> <b>1.1: Description of the Problem</b> </font> <br>
	<pre><font size = "4px">
Name: Cloth Simulation 
Problem Statement: Implement and calculate the various forces that take place in a cloth simulation. 
	</font></pre>
	<font size = "4px"> <b>1.2: Input Information</b> </font> <br>
	<pre><font size = "4px">
Controls: Mouse and Keyboard 
	W - Enables/Disables Wind Controls GUI Elements 
	S - Enables/Disables Spring Controls GUI Elements 
	G - Enables/Disables Gravity Controls GUI Elements 
	P - Enables/Disables Pause Menu GUI Elements 
	R - Resets Camera 
	Right Mouse Button - Grabs Cloth 
	Left Mouse Button - Move Camera 
	Scroll Wheel - Rotate Camera 
	</font></pre>
	<font size = "4px"> <b>1.3: Output Information</b> </font> <br>
	<pre><font size = "4px">
The program will display a simulation of what cloth should behave like in the real world we live in.
	</font></pre>
	<font size = "4px"> <b>1.4: User Interface</b> </font> <br>
		<pre><font size = "4px">
Wind Controls Panel
	Wind Direction Sliders - Determines the direction the force of the wind will be applied in.
	Wind Speed Slider - Determines how hard the wind will be blowing.
Spring Controls Panel
	Spring Stiffness Slider - Adjusts the stiffness of the springs of the cloth. 
Gravity Controls Panel
	Gravity Modifier - Modifies the strength of gravity in the system.
Pause Menu
	Quit - Closes the application(Only if using .exe).
	Reload - Reloads the level.
Cloth Controls Panel
	Cloth Size Slider - Modifies the size the colth will be.
	Gen Cloth Button - Generates the cloth with the new size set by the slider.
	</font></pre>
  </div>
  <div id = "Section">
    <h2><font size = "6px"><b>II: Design Documentation</b></font></h2>
  </div>
  <div id = "BreakDown">
	<p>
		<font size = "4px"> <b>2.1: System Architecture Description</b> </font> <br>
		<pre><font size = "4px">
The program is divided up into 5 classes (SpringDamper.cs, ClothBehavior.cs, AeroDynamics,
GUI.cs and Node.cs).The ClothBehavior class is responsible for handling all calculations for both
the springs and the nodes in the simulation. The GUI handles all of the on screen sliders and HUD
element the user can interact with the adjust the behavior of the cloth.
		</font></pre>
		<font size = "4px"> <b>File: Node.cs</b> </font> <br>
		<pre><font size = "4px">
	Name: m_Mass(float)
	Description: Hold the value that represents the mass of a node.
	
	Name: m_Velocity(Vector3)
	Description: Holds the value that represents the current velocity the node is moving at.

	Name: m_Acceleration(Vector3)
	Description: Holds the value that represents the current acceleration of the node.

	Name: m_Force(Vector3)
	Description: Hold the values that represents the strength of the force acting on the node.

	Name: locked(bool)
	Description: Boolean value to show if the node is locked at its starting position.
		</font></pre>
		<font size = "4px"> <b>File: AeroDynamics.cs</b> </font> <br>
		<pre><font size = "4px">
	Name: p1 (Node)
	Description: Reference to the first node the triangle is connected to.

	Name: p2 (Node)
	Description: Reference to the second node the spring is connected to.

	Name: p3 (Node)
	Description: Reference to the third node the spring is connected to.
	
	Name: CreateTriangle(void)
	Arguments: Node, Node, Node	
	Description: Takes the nodes passed in through the arguments and assigns them to the Node variables declared in the class. 

	Name: DrawTriangle(void)
	Arguments: N/A
	Description: Draws lines that connect the three points of the triangle together.
	</font></pre>		
	<font size = "4px"> <b>File: SpringDamper.cs</b> </font> <br>
	<pre><font size = "4px">
	Name: l(float)
	Description: Holds the value used to represent the rest length of the spring.

	Name: p1 (Node)
	Description: Reference to the first node the spring is connected to. 

	Name: p2 (Node)
	Description: Reference to the second node the spring is connected to. 

	Name: MakeSpring(void)
	Arguments: Node, Node, float
	Description: Creates a spring based on the arguments based in when the spring is being created in the Spawn Springs function in Cloth Behavior class

	Name: DrawLines(void)
	Arguments: N/A
	Description: Draws the lines between nodes the spring is connected to
	</font></pre>
	</P>
  </div>
  </body>
</html>
